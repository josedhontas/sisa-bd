CREATE TABLE usuario (
  email VARCHAR PRIMARY KEY,
  nome_completo VARCHAR NOT NULL,
  senha VARCHAR NOT NULL,
  telefone VARCHAR,
  departamento VARCHAR,
  descricao TEXT,
  link_imagem VARCHAR

);

CREATE TABLE papel (
  id_papel INT PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  nome_papel VARCHAR NOT NULL
);

CREATE TABLE editor (
  id_editor INT PRIMARY KEY REFERENCES papel(id_papel) ON DELETE CASCADE
);

CREATE TABLE autor (
  id_autor INT PRIMARY KEY REFERENCES papel(id_papel) ON DELETE CASCADE
);

CREATE TABLE gestor (
  id_gestor INT PRIMARY KEY REFERENCES papel(id_papel) ON DELETE CASCADE
);

CREATE TABLE administrador (
  id_administrador INT PRIMARY KEY REFERENCES papel(id_papel) ON DELETE CASCADE
);

CREATE TABLE revista (
  id_revista INT PRIMARY KEY,
  nome_revista VARCHAR,
  descricao TEXT
);

CREATE TABLE trabalha_editor (
  id_editor INT REFERENCES editor(id_editor),
  id_revista INT REFERENCES revista(id_revista),
  PRIMARY KEY (id_editor, id_revista)
);

CREATE TABLE trabalha_administrador (
  id_administrador INT REFERENCES administrador(id_administrador),
  id_revista INT REFERENCES revista(id_revista),
  PRIMARY KEY (id_administrador, id_revista)
);

CREATE TABLE artigo (
  id_artigo INT PRIMARY KEY,
  id_revista INT REFERENCES revista(id_revista) ON DELETE SET NULL, -- Alteração aqui
  nome_artigo VARCHAR,
  link_artigo VARCHAR,
  resumo TEXT
);


CREATE TABLE revisor (
  id_revisor INT PRIMARY KEY REFERENCES papel(id_papel) ON DELETE CASCADE

);

CREATE TABLE avaliacao (
  id_avaliacao INT PRIMARY KEY,
  id_revisor INT REFERENCES revisor(id_revisor) ON DELETE CASCADE,
  id_artigo INT REFERENCES artigo(id_artigo) ON DELETE CASCADE,
  avaliacao VARCHAR,
  comentario TEXT
);

CREATE TABLE parecer (
  id_editor INT REFERENCES editor(id_editor) ON DELETE CASCADE,
  id_artigo INT REFERENCES artigo(id_artigo) ON DELETE CASCADE,
  data DATE,
  comentario TEXT,
  parecer VARCHAR,
  PRIMARY KEY (id_editor, id_artigo)
);

CREATE TABLE submete (
  id_autor INT REFERENCES autor(id_autor) ON DELETE CASCADE,
  id_artigo INT REFERENCES artigo(id_artigo) ON DELETE CASCADE,
  PRIMARY KEY (id_autor, id_artigo)
);
