CREATE TABLE usuario (
  email VARCHAR PRIMARY KEY,
  nome_completo VARCHAR NOT NULL,
  senha VARCHAR NOT NULL,
  telefone VARCHAR,
  departamento VARCHAR,
  universidade VARCHAR,
  descricao TEXT,
  link_imagem VARCHAR
);

CREATE TABLE editor (
  id_editor SERIAL PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  cargo VARCHAR
);

CREATE TABLE autor (
  id_autor SERIAL PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  cargo VARCHAR
);

CREATE TABLE revisor (
  id_revisor SERIAL PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  cargo VARCHAR
);

CREATE TABLE gestor (
  id_gestor SERIAL PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  cargo VARCHAR
);

CREATE TABLE administrador (
  id_administrador SERIAL PRIMARY KEY,
  email VARCHAR REFERENCES usuario(email) ON DELETE CASCADE,
  cargo VARCHAR
);

CREATE TABLE revista (
  id_revista SERIAL PRIMARY KEY,
  nome_revista VARCHAR,
  descricao TEXT
);

CREATE TABLE trabalha_editor (
  id_editor INT REFERENCES editor(id_editor) ON DELETE CASCADE,
  id_revista INT REFERENCES revista(id_revista) ON DELETE CASCADE,
  PRIMARY KEY (id_editor, id_revista)
);

CREATE TABLE trabalha_administrador (
  id_administrador INT REFERENCES administrador(id_administrador) ON DELETE CASCADE,
  id_revista INT REFERENCES revista(id_revista) ON DELETE CASCADE,
  PRIMARY KEY (id_administrador, id_revista)
);

CREATE TABLE artigo (
  id_artigo SERIAL PRIMARY KEY,
  id_revista INT REFERENCES revista(id_revista) ON DELETE SET NULL,
  email_revisor VARCHAR,
  palavras_chaves TEXT,
  nome_artigo VARCHAR,
  link_artigo VARCHAR,
  msg_revisor TEXT,
  resumo TEXT
);

CREATE TABLE avaliacao (
  id_avaliacao SERIAL PRIMARY KEY,
  id_revisor INT REFERENCES revisor(id_revisor) ON DELETE CASCADE,
  id_artigo INT REFERENCES artigo(id_artigo) ON DELETE CASCADE,
  avaliacao VARCHAR,
  comentario TEXT
);

CREATE TABLE parecer (
  id_parecer SERIAL PRIMARY KEY,
  id_editor INT REFERENCES editor(id_editor) ON DELETE CASCADE,
  id_artigo INT REFERENCES artigo(id_artigo) ON DELETE CASCADE,
  data DATE,
  comentario TEXT,
  parecer VARCHAR
);
